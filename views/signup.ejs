<%- include('partials/header'); -%>
<body>
  <form action="">
    <h2>Sign up</h2>
    <div class="form">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" required />
      <div class="email-error"></div>
    </div>
    <div class="form">
      <label for="password">Password</label>
      <input type="password" id="password" name="password" required />
      <div class="password-error"></div>
    </div>
    <button type="submit">Sign Up</button>
  </form>
  <%-include('partials/footer'); -%>
</body>
</html>
<script>
  const form = document.querySelector('form');
  form.addEventListener('submit', async function (event) {
    event.preventDefault();

    // reset error messages
    document.querySelector('.email-error').textContent = '';
    document.querySelector('.password-error').textContent = '';
    // get form data
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    try {
      const response = await fetch('/signup', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ email, password }),
      });
      const data = await response.json();
      if (response.ok) {
        console.log('Sign up successful');
        console.log(data);
      } else {
        console.error('Sign up failed');
        console.error(data);
        const errorr=document.querySelector('.email-error');
        errorr.textContent = data.errors.email;
        const errorrs=document.querySelector('.password-error');
        errorrs.textContent = data.errors.password ;

      }

      if (data.user){
        location.assign('/');
      }
    } catch (error) {
      console.error('Error:', error);
    
    }
  });
</script>